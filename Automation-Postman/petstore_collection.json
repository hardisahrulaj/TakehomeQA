{
  "info": {
    "name": "Petstore API Test - CASE02",
    "_postman_id": "petstore-case02-hardi",
    "description": "API Testing https://petstore.swagger.io/v2 | Chaining via environment variables | 16 TC (9 positif, 7 negatif)",
    "schema": "https://schema.getpostman.com/json/collection/v2.1.0/collection.json"
  },
  "item": [
    {
      "name": "Pet",
      "item": [
        {
          "name": "TC001 - POST Add New Pet (Positif)",
          "event": [
            {
              "listen": "prerequest",
              "script": {
                "exec": [
                  "var seed = Math.floor(Math.random() * 900000) + 100000;",
                  "pm.environment.set('petId', seed);"
                ],
                "type": "text/javascript"
              }
            },
            {
              "listen": "test",
              "script": {
                "exec": [
                  "pm.test('[TC001] Status code is 200', function () {",
                  "  pm.response.to.have.status(200);",
                  "});",
                  "pm.test('[TC001] Content-Type is application/json', function () {",
                  "  pm.expect(pm.response.headers.get('Content-Type')).to.include('application/json');",
                  "});",
                  "pm.test('[TC001] Response time < 3000ms', function () {",
                  "  pm.expect(pm.response.responseTime).to.be.below(3000);",
                  "});",
                  "pm.test('[TC001] Schema valid: id, name, status ada', function () {",
                  "  var json = pm.response.json();",
                  "  pm.expect(json).to.have.property('id');",
                  "  pm.expect(json).to.have.property('name');",
                  "  pm.expect(json).to.have.property('status');",
                  "  pm.expect(json).to.have.property('photoUrls');",
                  "  pm.expect(json.id).to.be.a('number');",
                  "  pm.expect(json.name).to.eql('BuddyTest');",
                  "  pm.expect(json.status).to.eql('available');",
                  "  pm.environment.set('petId', json.id);",
                  "});"
                ],
                "type": "text/javascript"
              }
            }
          ],
          "request": {
            "method": "POST",
            "header": [{ "key": "Content-Type", "value": "application/json" }],
            "body": {
              "mode": "raw",
              "raw": "{\n  \"id\": {{petId}},\n  \"category\": { \"id\": 1, \"name\": \"Dogs\" },\n  \"name\": \"BuddyTest\",\n  \"photoUrls\": [\"https://example.com/buddy.jpg\"],\n  \"tags\": [{ \"id\": 1, \"name\": \"friendly\" }],\n  \"status\": \"available\"\n}"
            },
            "url": { "raw": "{{baseUrl}}/pet", "host": ["{{baseUrl}}"], "path": ["pet"] }
          }
        },
        {
          "name": "TC002 - GET Pet by Valid ID (Positif, chained TC001)",
          "event": [
            {
              "listen": "test",
              "script": {
                "exec": [
                  "pm.test('[TC002] Status code is 200', function () {",
                  "  pm.response.to.have.status(200);",
                  "});",
                  "pm.test('[TC002] Content-Type is application/json', function () {",
                  "  pm.expect(pm.response.headers.get('Content-Type')).to.include('application/json');",
                  "});",
                  "pm.test('[TC002] Response time < 3000ms', function () {",
                  "  pm.expect(pm.response.responseTime).to.be.below(3000);",
                  "});",
                  "pm.test('[TC002] Pet id, name, status sesuai TC001', function () {",
                  "  var json = pm.response.json();",
                  "  pm.expect(json.id).to.eql(parseInt(pm.environment.get('petId')));",
                  "  pm.expect(json.name).to.eql('BuddyTest');",
                  "  pm.expect(json.status).to.eql('available');",
                  "});"
                ],
                "type": "text/javascript"
              }
            }
          ],
          "request": {
            "method": "GET",
            "url": {
              "raw": "{{baseUrl}}/pet/{{petId}}",
              "host": ["{{baseUrl}}"],
              "path": ["pet", "{{petId}}"]
            }
          }
        },
        {
          "name": "TC003 - PUT Update Pet (Positif, chained TC001)",
          "event": [
            {
              "listen": "test",
              "script": {
                "exec": [
                  "pm.test('[TC003] Status code is 200', function () {",
                  "  pm.response.to.have.status(200);",
                  "});",
                  "pm.test('[TC003] Content-Type is application/json', function () {",
                  "  pm.expect(pm.response.headers.get('Content-Type')).to.include('application/json');",
                  "});",
                  "pm.test('[TC003] Response time < 3000ms', function () {",
                  "  pm.expect(pm.response.responseTime).to.be.below(3000);",
                  "});",
                  "pm.test('[TC003] name dan status berhasil diupdate', function () {",
                  "  var json = pm.response.json();",
                  "  pm.expect(json).to.have.property('id');",
                  "  pm.expect(json.name).to.eql('BuddyUpdated');",
                  "  pm.expect(json.status).to.eql('sold');",
                  "});"
                ],
                "type": "text/javascript"
              }
            }
          ],
          "request": {
            "method": "PUT",
            "header": [{ "key": "Content-Type", "value": "application/json" }],
            "body": {
              "mode": "raw",
              "raw": "{\n  \"id\": {{petId}},\n  \"category\": { \"id\": 1, \"name\": \"Dogs\" },\n  \"name\": \"BuddyUpdated\",\n  \"photoUrls\": [\"https://example.com/buddy.jpg\"],\n  \"tags\": [{ \"id\": 1, \"name\": \"friendly\" }],\n  \"status\": \"sold\"\n}"
            },
            "url": { "raw": "{{baseUrl}}/pet", "host": ["{{baseUrl}}"], "path": ["pet"] }
          }
        },
        {
          "name": "TC004 - GET Pet by Status available (Positif)",
          "event": [
            {
              "listen": "test",
              "script": {
                "exec": [
                  "pm.test('[TC004] Status code is 200', function () {",
                  "  pm.response.to.have.status(200);",
                  "});",
                  "pm.test('[TC004] Content-Type is application/json', function () {",
                  "  pm.expect(pm.response.headers.get('Content-Type')).to.include('application/json');",
                  "});",
                  "pm.test('[TC004] Response time < 5000ms', function () {",
                  "  pm.expect(pm.response.responseTime).to.be.below(5000);",
                  "});",
                  "pm.test('[TC004] Response array, tiap item punya id dan status available', function () {",
                  "  var json = pm.response.json();",
                  "  pm.expect(json).to.be.an('array');",
                  "  pm.expect(json.length).to.be.above(0);",
                  "  json.slice(0, 3).forEach(function (pet) {",
                  "    pm.expect(pet).to.have.property('id');",
                  "    pm.expect(pet.status).to.eql('available');",
                  "  });",
                  "});"
                ],
                "type": "text/javascript"
              }
            }
          ],
          "request": {
            "method": "GET",
            "url": {
              "raw": "{{baseUrl}}/pet/findByStatus?status=available",
              "host": ["{{baseUrl}}"],
              "path": ["pet", "findByStatus"],
              "query": [{ "key": "status", "value": "available" }]
            }
          }
        },
        {
          "name": "TC005 - DELETE Pet by Valid ID (Positif, chained TC001)",
          "event": [
            {
              "listen": "test",
              "script": {
                "exec": [
                  "pm.test('[TC005] Status code is 200', function () {",
                  "  pm.response.to.have.status(200);",
                  "});",
                  "pm.test('[TC005] Content-Type is application/json', function () {",
                  "  pm.expect(pm.response.headers.get('Content-Type')).to.include('application/json');",
                  "});",
                  "pm.test('[TC005] Response time < 3000ms', function () {",
                  "  pm.expect(pm.response.responseTime).to.be.below(3000);",
                  "});",
                  "pm.test('[TC005] Response code 200 dan message berisi petId', function () {",
                  "  var json = pm.response.json();",
                  "  pm.expect(json.code).to.eql(200);",
                  "  pm.expect(json.message).to.eql(String(pm.environment.get('petId')));",
                  "});"
                ],
                "type": "text/javascript"
              }
            }
          ],
          "request": {
            "method": "DELETE",
            "header": [{ "key": "api_key", "value": "special-key" }],
            "url": {
              "raw": "{{baseUrl}}/pet/{{petId}}",
              "host": ["{{baseUrl}}"],
              "path": ["pet", "{{petId}}"]
            }
          }
        },
        {
          "name": "TC006 - GET Pet by ID Tidak Ada (Negatif - 404)",
          "event": [
            {
              "listen": "test",
              "script": {
                "exec": [
                  "pm.test('[TC006] Status code is 404', function () {",
                  "  pm.response.to.have.status(404);",
                  "});",
                  "pm.test('[TC006] Content-Type is application/json', function () {",
                  "  pm.expect(pm.response.headers.get('Content-Type')).to.include('application/json');",
                  "});",
                  "pm.test('[TC006] Response time < 3000ms', function () {",
                  "  pm.expect(pm.response.responseTime).to.be.below(3000);",
                  "});",
                  "pm.test('[TC006] type error dan message Pet not found', function () {",
                  "  var json = pm.response.json();",
                  "  pm.expect(json.type).to.eql('error');",
                  "  pm.expect(json.message).to.eql('Pet not found');",
                  "});"
                ],
                "type": "text/javascript"
              }
            }
          ],
          "request": {
            "method": "GET",
            "url": {
              "raw": "{{baseUrl}}/pet/9999999999",
              "host": ["{{baseUrl}}"],
              "path": ["pet", "9999999999"]
            }
          }
        },
        {
          "name": "TC007 - GET Pet by ID Non-Numerik (Negatif - 404)",
          "event": [
            {
              "listen": "test",
              "script": {
                "exec": [
                  "pm.test('[TC007] Status code is 404 (non-numeric ID diperlakukan not found)', function () {",
                  "  pm.response.to.have.status(404);",
                  "});",
                  "pm.test('[TC007] Content-Type is application/json', function () {",
                  "  pm.expect(pm.response.headers.get('Content-Type')).to.include('application/json');",
                  "});",
                  "pm.test('[TC007] Response time < 3000ms', function () {",
                  "  pm.expect(pm.response.responseTime).to.be.below(3000);",
                  "});",
                  "pm.test('[TC007] Response body memiliki type dan message', function () {",
                  "  var json = pm.response.json();",
                  "  pm.expect(json).to.have.property('type');",
                  "  pm.expect(json).to.have.property('message');",
                  "});"
                ],
                "type": "text/javascript"
              }
            }
          ],
          "request": {
            "method": "GET",
            "url": {
              "raw": "{{baseUrl}}/pet/abc123",
              "host": ["{{baseUrl}}"],
              "path": ["pet", "abc123"]
            }
          }
        },
        {
          "name": "TC008 - POST Add Pet Body Kosong (Negatif - 405)",
          "event": [
            {
              "listen": "test",
              "script": {
                "exec": [
                  "pm.test('[TC008] Status code is 405 (no body = method not allowed / invalid input)', function () {",
                  "  pm.response.to.have.status(405);",
                  "});",
                  "pm.test('[TC008] Content-Type is application/json', function () {",
                  "  pm.expect(pm.response.headers.get('Content-Type')).to.include('application/json');",
                  "});",
                  "pm.test('[TC008] Response time < 3000ms', function () {",
                  "  pm.expect(pm.response.responseTime).to.be.below(3000);",
                  "});",
                  "pm.test('[TC008] Response body memiliki message', function () {",
                  "  var json = pm.response.json();",
                  "  pm.expect(json).to.have.property('message');",
                  "});"
                ],
                "type": "text/javascript"
              }
            }
          ],
          "request": {
            "method": "POST",
            "header": [{ "key": "Content-Type", "value": "application/json" }],
            "body": {
              "mode": "raw",
              "raw": ""
            },
            "url": { "raw": "{{baseUrl}}/pet", "host": ["{{baseUrl}}"], "path": ["pet"] }
          }
        },
        {
          "name": "TC009 - DELETE Pet by ID Tidak Ada (Negatif - 404)",
          "event": [
            {
              "listen": "test",
              "script": {
                "exec": [
                  "pm.test('[TC009] Status code is 404', function () {",
                  "  pm.response.to.have.status(404);",
                  "});",
                  "pm.test('[TC009] Response time < 3000ms', function () {",
                  "  pm.expect(pm.response.responseTime).to.be.below(3000);",
                  "});"
                ],
                "type": "text/javascript"
              }
            }
          ],
          "request": {
            "method": "DELETE",
            "header": [{ "key": "api_key", "value": "special-key" }],
            "url": {
              "raw": "{{baseUrl}}/pet/9999999999",
              "host": ["{{baseUrl}}"],
              "path": ["pet", "9999999999"]
            }
          }
        }
      ]
    },
    {
      "name": "Store",
      "item": [
        {
          "name": "TC010 - POST Place Order (Positif)",
          "event": [
            {
              "listen": "prerequest",
              "script": {
                "exec": [
                  "var seed = Math.floor(Math.random() * 8000) + 1000;",
                  "pm.environment.set('orderId', seed);"
                ],
                "type": "text/javascript"
              }
            },
            {
              "listen": "test",
              "script": {
                "exec": [
                  "pm.test('[TC010] Status code is 200', function () {",
                  "  pm.response.to.have.status(200);",
                  "});",
                  "pm.test('[TC010] Content-Type is application/json', function () {",
                  "  pm.expect(pm.response.headers.get('Content-Type')).to.include('application/json');",
                  "});",
                  "pm.test('[TC010] Response time < 3000ms', function () {",
                  "  pm.expect(pm.response.responseTime).to.be.below(3000);",
                  "});",
                  "pm.test('[TC010] Schema order valid: id, petId, status ada', function () {",
                  "  var json = pm.response.json();",
                  "  pm.expect(json).to.have.property('id');",
                  "  pm.expect(json).to.have.property('petId');",
                  "  pm.expect(json).to.have.property('status');",
                  "  pm.expect(json).to.have.property('complete');",
                  "  pm.expect(json.status).to.eql('placed');",
                  "  pm.expect(json.complete).to.eql(true);",
                  "  pm.environment.set('orderId', json.id);",
                  "});"
                ],
                "type": "text/javascript"
              }
            }
          ],
          "request": {
            "method": "POST",
            "header": [{ "key": "Content-Type", "value": "application/json" }],
            "body": {
              "mode": "raw",
              "raw": "{\n  \"id\": {{orderId}},\n  \"petId\": 1,\n  \"quantity\": 2,\n  \"shipDate\": \"2025-07-01T00:00:00.000Z\",\n  \"status\": \"placed\",\n  \"complete\": true\n}"
            },
            "url": { "raw": "{{baseUrl}}/store/order", "host": ["{{baseUrl}}"], "path": ["store", "order"] }
          }
        },
        {
          "name": "TC011 - GET Order by Valid ID (Positif, chained TC010)",
          "event": [
            {
              "listen": "test",
              "script": {
                "exec": [
                  "pm.test('[TC011] Status code is 200', function () {",
                  "  pm.response.to.have.status(200);",
                  "});",
                  "pm.test('[TC011] Content-Type is application/json', function () {",
                  "  pm.expect(pm.response.headers.get('Content-Type')).to.include('application/json');",
                  "});",
                  "pm.test('[TC011] Response time < 3000ms', function () {",
                  "  pm.expect(pm.response.responseTime).to.be.below(3000);",
                  "});",
                  "pm.test('[TC011] id, status, complete sesuai TC010', function () {",
                  "  var json = pm.response.json();",
                  "  pm.expect(json.id).to.eql(parseInt(pm.environment.get('orderId')));",
                  "  pm.expect(json.status).to.eql('placed');",
                  "  pm.expect(json.complete).to.eql(true);",
                  "});"
                ],
                "type": "text/javascript"
              }
            }
          ],
          "request": {
            "method": "GET",
            "url": {
              "raw": "{{baseUrl}}/store/order/{{orderId}}",
              "host": ["{{baseUrl}}"],
              "path": ["store", "order", "{{orderId}}"]
            }
          }
        },
        {
          "name": "TC012 - GET Store Inventory (Positif)",
          "event": [
            {
              "listen": "test",
              "script": {
                "exec": [
                  "pm.test('[TC012] Status code is 200', function () {",
                  "  pm.response.to.have.status(200);",
                  "});",
                  "pm.test('[TC012] Content-Type is application/json', function () {",
                  "  pm.expect(pm.response.headers.get('Content-Type')).to.include('application/json');",
                  "});",
                  "pm.test('[TC012] Response time < 3000ms', function () {",
                  "  pm.expect(pm.response.responseTime).to.be.below(3000);",
                  "});",
                  "pm.test('[TC012] Response adalah object inventory map tidak kosong', function () {",
                  "  var json = pm.response.json();",
                  "  pm.expect(json).to.be.an('object');",
                  "  pm.expect(Object.keys(json).length).to.be.above(0);",
                  "});"
                ],
                "type": "text/javascript"
              }
            }
          ],
          "request": {
            "method": "GET",
            "url": { "raw": "{{baseUrl}}/store/inventory", "host": ["{{baseUrl}}"], "path": ["store", "inventory"] }
          }
        },
        {
          "name": "TC013 - GET Order by ID Tidak Ada (Negatif - 404)",
          "event": [
            {
              "listen": "test",
              "script": {
                "exec": [
                  "pm.test('[TC013] Status code is 404', function () {",
                  "  pm.response.to.have.status(404);",
                  "});",
                  "pm.test('[TC013] Content-Type is application/json', function () {",
                  "  pm.expect(pm.response.headers.get('Content-Type')).to.include('application/json');",
                  "});",
                  "pm.test('[TC013] Response time < 3000ms', function () {",
                  "  pm.expect(pm.response.responseTime).to.be.below(3000);",
                  "});",
                  "pm.test('[TC013] message adalah Order not found', function () {",
                  "  var json = pm.response.json();",
                  "  pm.expect(json).to.have.property('message');",
                  "  pm.expect(json.message).to.eql('Order not found');",
                  "});"
                ],
                "type": "text/javascript"
              }
            }
          ],
          "request": {
            "method": "GET",
            "url": {
              "raw": "{{baseUrl}}/store/order/9999999",
              "host": ["{{baseUrl}}"],
              "path": ["store", "order", "9999999"]
            }
          }
        }
      ]
    },
    {
      "name": "User",
      "item": [
        {
          "name": "TC014 - POST Create User (Positif)",
          "event": [
            {
              "listen": "prerequest",
              "script": {
                "exec": [
                  "var seed = Math.floor(Math.random() * 90000) + 10000;",
                  "pm.environment.set('username', 'testuser_' + seed);"
                ],
                "type": "text/javascript"
              }
            },
            {
              "listen": "test",
              "script": {
                "exec": [
                  "pm.test('[TC014] Status code is 200', function () {",
                  "  pm.response.to.have.status(200);",
                  "});",
                  "pm.test('[TC014] Content-Type is application/json', function () {",
                  "  pm.expect(pm.response.headers.get('Content-Type')).to.include('application/json');",
                  "});",
                  "pm.test('[TC014] Response time < 3000ms', function () {",
                  "  pm.expect(pm.response.responseTime).to.be.below(3000);",
                  "});",
                  "pm.test('[TC014] code 200 dan message (userId) ada', function () {",
                  "  var json = pm.response.json();",
                  "  pm.expect(json.code).to.eql(200);",
                  "  pm.expect(json).to.have.property('message');",
                  "  pm.expect(json.message).to.be.a('string');",
                  "});"
                ],
                "type": "text/javascript"
              }
            }
          ],
          "request": {
            "method": "POST",
            "header": [{ "key": "Content-Type", "value": "application/json" }],
            "body": {
              "mode": "raw",
              "raw": "{\n  \"id\": 0,\n  \"username\": \"{{username}}\",\n  \"firstName\": \"Test\",\n  \"lastName\": \"User\",\n  \"email\": \"testuser@example.com\",\n  \"password\": \"Password123!\",\n  \"phone\": \"08123456789\",\n  \"userStatus\": 1\n}"
            },
            "url": { "raw": "{{baseUrl}}/user", "host": ["{{baseUrl}}"], "path": ["user"] }
          }
        },
        {
          "name": "TC015 - GET User by Username Valid (Positif, chained TC014)",
          "event": [
            {
              "listen": "test",
              "script": {
                "exec": [
                  "pm.test('[TC015] Status code is 200', function () {",
                  "  pm.response.to.have.status(200);",
                  "});",
                  "pm.test('[TC015] Content-Type is application/json', function () {",
                  "  pm.expect(pm.response.headers.get('Content-Type')).to.include('application/json');",
                  "});",
                  "pm.test('[TC015] Response time < 3000ms', function () {",
                  "  pm.expect(pm.response.responseTime).to.be.below(3000);",
                  "});",
                  "pm.test('[TC015] Schema user valid: id, username, email ada dan sesuai', function () {",
                  "  var json = pm.response.json();",
                  "  pm.expect(json).to.have.property('id');",
                  "  pm.expect(json).to.have.property('username');",
                  "  pm.expect(json).to.have.property('email');",
                  "  pm.expect(json.username).to.eql(pm.environment.get('username'));",
                  "  pm.expect(json.email).to.eql('testuser@example.com');",
                  "});"
                ],
                "type": "text/javascript"
              }
            }
          ],
          "request": {
            "method": "GET",
            "url": {
              "raw": "{{baseUrl}}/user/{{username}}",
              "host": ["{{baseUrl}}"],
              "path": ["user", "{{username}}"]
            }
          }
        },
        {
          "name": "TC016 - GET User by Username Tidak Ada (Negatif - 404)",
          "event": [
            {
              "listen": "test",
              "script": {
                "exec": [
                  "pm.test('[TC016] Status code is 404', function () {",
                  "  pm.response.to.have.status(404);",
                  "});",
                  "pm.test('[TC016] Content-Type is application/json', function () {",
                  "  pm.expect(pm.response.headers.get('Content-Type')).to.include('application/json');",
                  "});",
                  "pm.test('[TC016] Response time < 3000ms', function () {",
                  "  pm.expect(pm.response.responseTime).to.be.below(3000);",
                  "});",
                  "pm.test('[TC016] type error dan message User not found', function () {",
                  "  var json = pm.response.json();",
                  "  pm.expect(json.type).to.eql('error');",
                  "  pm.expect(json.message).to.eql('User not found');",
                  "});"
                ],
                "type": "text/javascript"
              }
            }
          ],
          "request": {
            "method": "GET",
            "url": {
              "raw": "{{baseUrl}}/user/usertidakada_xyz99999",
              "host": ["{{baseUrl}}"],
              "path": ["user", "usertidakada_xyz99999"]
            }
          }
        }
      ]
    }
  ]
}
